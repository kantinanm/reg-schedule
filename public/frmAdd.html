<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <!-- jQuery Datepicker -->
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="https://fonts.googleapis.com/css?family=Mali" rel="stylesheet">

    <!-- myscript -->
    <script src="public/js/script.js"></script>

    <title>ระบบจองห้องเรียนออนไลน์</title>
    <style>
      body{
        font-family: 'Mali', cursive;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" href="#">
          <i class="material-icons">computer</i>
          ระบบจองห้องเรียนออนไลน์
        </a>
      </nav>
      <form>
        <div class="form-group row">
          <label for="cboBranch" class="col-sm-2 col-form-label">เลือกสาขาวิชา</label>
          <div class="col-sm-5">
            <select class="custom-select" id="cboBranch">
              <option selected>Choose...</option>
              <option value="303/">วิศวกรรมไฟฟ้า</option>
              <option value="305/">วิศวกรรมคอมพิวเตอร์</option>
            </select>
          </div>
        </div>
        <div class="form-group row">
          <label for="cboSubject" class="col-sm-2 col-form-label">รายวิชา</label>
          <div class="col-sm-5">
            <select class="custom-select" id="cboSubject">
              <option value="000000" selected>Choose...</option>
            </select>
          </div>
        </div>
      </form>
    </div>
    <script>
      /*$(document).ready(function(){

      });*/

      $( "#cboBranch" ).change(function() {
        $("#cboSubject option").remove();
        $("#cboSubject").append('<option selected>Choose...</option>');
        $.getJSON( "http://localhost:3000/room/", function( data ) {
          var subName = getSchedule(data,"Time");
          //subName = uniqueSub(subName);
          $.each(subName, function(key, value) {
            var chkName = value.subject.replace(/[^A-Za-z0-9_\.]+/g, " ");
            //chkName = chkName.split(".");
            //chkName = chkName[0].trim();
            //console.log(chkName);
              $('#cboSubject')
              .append($("<option></option>")
                .attr("value",value.code)
                .text(value.code+" "+chkName));
          });
        });
      });
    </script>
  </body>
</html>
